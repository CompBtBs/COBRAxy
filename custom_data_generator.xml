<tool id="MaREA Custom Data Generator" name="CustomDataGenerator" version="1.0.0">
    <description>- Custom Data Generator for RAS and RPS modules</description>
    <macros>
        <import>marea_macros.xml</import>
    </macros>
    <requirements>
        
    </requirements>
    <command detect_errors="exit_code">
        <![CDATA[
      	python $__tool_directory__/custom_data_generator.py
        --input $input
        --name $input.element_identifier
        --output_format $output_format
        --out_log $log
        
        #if $output_format == 'pickle':
            --ras_output $results_pk.ras_output_pk
            --rps_output $results_pk.rps_output_pk
        #else
            --ras_output $results_csv.ras_output_csv
            --rps_output $results_csv.rps_output_csv
        #end if
        ]]>
    </command>
    <inputs>
        <param name="input" argument="--input" type="data" format="xml, json" label="Custom model:" />
        <param name="name" argument="--name" type="text" label="Model's name:" value="Model" help="Default: Model" />
        
        <param name="output_format" argument="--output_format" type="select" label="Output files format:">
            <option value="pickle" selected="true">pickle extension (binary, non-editable, pre-parsed)</option>
            <option value="csv">Comma Separated Values (csv text file, editable, raw)</option>
        </param>
    </inputs>

    <outputs>
        <data format="txt" name="log" label="CustomDataGenerator - $name - Log" />
        
        <collection name="results_pk" type="list" label="Custom Data Results">
            <data format="pickle" name="ras_output_pk" label="$name RAS (pickle)">
                <filter>format == "pickle"</filter>
            </data>

            <data format="pickle" name="rps_output_pk" label="$name RPS (pickle)">
                <filter>format == "pickle"</filter>
            </data>
        </collection>

        <collection name="results_csv" type="list" label="Custom Data Results">
            <data format="csv" name="ras_output_csv" label="$name RAS (csv)"/>
                <filter>format == "csv"</filter>
            </data>

            <data format="csv" name="rps_output_csv" label="$name RPS (csv)"/>
                <filter>format == "csv"</filter>
            </data>
        </collection>
    </outputs>

    <help>
<![CDATA[
Rules about rules:
    "and" and "or" rigorously in lowercase
    exactly 1 space (" ") between all words
    NO space between opening parentheses ("(") and the following word
    NO space between closing parentheses (")") and the preceding word
]]>
    </help>
    <expand macro="citations" />
</tool>